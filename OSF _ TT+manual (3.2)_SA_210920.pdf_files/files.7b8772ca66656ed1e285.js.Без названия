webpackJsonp([61],{899:function(a,n,t){t(900)},900:function(a,n,t){"use strict";function e(a,n){a.data.branch=n,this.updateFolder(null,a)}function o(a){return p.buildTreeBeardMetadata(a,{branch:a.data.branch})}function i(a,n){var t=this;a.children.forEach(function(n){f.Utils.inheritFromParent(n,a,["branch"])}),f.Utils.setCurrentFileID.call(t,a,window.contextVars.node.id,window.contextVars.file),!n&&t.isMultiselected(t.currentFileID)&&f.Utils.scrollToFile.call(t,t.currentFileID)}function r(a){var n=this,t=new u(a.data.nodeUrl).segment("files").segment(a.data.provider).segment(a.data.path.substring(1)).search({branch:a.data.branch}).toString();-1!==m.indexOf(n.pressedKey)?window.open(t,"_blank"):window.open(t,"_self")}function c(a,n){var t=this;if(a.data.isAddonRoot&&!1===a.connected)return f.Utils.connectCheckTemplate.call(this,a);if(a.data.addonFullname){var e=h.urlParams();!a.data.branch&&e.branch&&(a.data.branch=e.branch);var o=a.data.branch||a.data.defaultBranch;return s("span",[s("bitbucket-name",a.data.name+" ("+o+")")])}return"file"===a.kind&&a.data.permissions.view?s("span",[s("bitbucket-name.fg-file-links",{onclick:function(){r.call(t,a)}},a.data.name)]):s("span",a.data.name)}function d(a){var n=this,t=(a.parent().parent(),[]);return t.push({data:"name",folderIcons:!0,filter:!0,custom:c}),"project-files"===n.options.placement&&(t.push({data:"size",sortInclude:!1,filter:!1,custom:function(){return a.data.size?h.humanFileSize(a.data.size,!0):""}}),t.push({data:"downloads",sortInclude:!1,filter:!1,custom:function(){return s("")}}),t.push({data:"version",filter:!1,sortInclude:!1,custom:function(){return s("")}})),"fileview"!==n.options.placement&&t.push({data:"modified",filter:!1,custom:function(){return s("")}}),t}function l(a){if(a.data.iconUrl)return s("img",{src:a.data.iconUrl,style:{width:"16px",height:"auto"}}," ")}var s=t(4),u=(t(0),t(57)),f=t(20).Fangorn,p=t(86),h=t(1),m=[224,17,91,93],b={view:function(a,n,t){function o(a,n,t){a.stopPropagation(),window.location=p.buildTreeBeardDownload(n,{commitSha:n.data.extra.commitSha})}var i=n.treebeard,c=n.item,d=[];if("folder"===c.kind&&c.data.addonFullname){var l=[];if(c.data.branches){c.data.branch=c.data.branch||c.data.defaultBranch;for(var u=0;u<c.data.branches.length;u++){var h=c.data.branches[u]===c.data.branch?"selected":"";l.push(s("option",{selected:h,value:c.data.branches[u]},c.data.branches[u]))}}d.push(s.component(f.Components.dropdown,{label:"Branch: ",onchange:function(a){e.call(i,c,a.target.value)},icon:"fa fa-external-link",className:"text-info"},l))}return"fileview"!==i.options.placement&&("folder"===c.kind&&c.data.addonFullname?d.push(s.component(f.Components.button,{onclick:function(a){window.location=p.buildTreeBeardDownloadZip(c,{branch:c.data.branch})},icon:"fa fa-download",className:"text-primary"},"Download"),s.component(f.Components.button,{onclick:function(a){window.open(c.data.urls.repo+c.data.branch,"_blank")},icon:"fa fa-external-link",className:"text-info"},"Open")):"folder"!==c.kind||c.data.addonFullname?"file"===c.kind&&(d.push(s.component(f.Components.button,{onclick:function(a){o.call(i,a,c)},icon:"fa fa-download",className:"text-primary"},"Download")),c.data.permissions&&c.data.permissions.view&&(d.push(s.component(f.Components.button,{onclick:function(a){r.call(i,c)},icon:"fa fa-file-o",className:"text-info"},"View")),c.data.permissions.private||d.push(s("a.text-info.fangorn-toolbar-icon",{href:c.data.extra.webView},[s("i.fa.fa-external-link"),s("span","View on Bitbucket")])))):d.push(s.component(f.Components.button,{onclick:function(a){window.location=p.buildTreeBeardDownloadZip(c,{branch:c.data.branch})},icon:"fa fa-download",className:"text-primary"},"Download as zip"))),s("span",d)}};f.config.bitbucket={lazyload:o,resolveRows:d,folderIcon:l,lazyLoadOnLoad:i,itemButtons:b}}},[899]);
//# sourceMappingURL=files.7b8772ca66656ed1e285.js.map